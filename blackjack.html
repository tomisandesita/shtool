<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>しょーもない道具箱つーるおきば</title>
    <meta name="description" content="blackjack,暇つぶしのギャンブルはいいですよ！">
    <meta name="keywords" content="とみー,暇つぶし">
    <meta name="robots" content="index, follow">
    <link rel="app-touch-icon" href="logo.png">
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="logo.png" type="image/x-icon"> <!-- ファビコンの追加 -->
<head prefix="og: https://ogp.me/ns# fb: https://ogp.me/ns/fb# article: https://ogp.me/ns/article#">
    <meta property="og:title" content="ブラックジャックで暇をつぶそう">
    <meta property="og:description" content="ブラックジャックで暇をつぶそう!">
    <meta property="og:url" content="https://tomisandesita.github.io/shtool/blackjack/">
    <meta property="og:image" content="https://tomisandesita.github.io/shtool/logo.png">
    <meta property="og:site_name" content="しょーもない道具箱">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="しょーもない道具箱">
    <meta name="twitter:description" content="しょーもない暇つぶしツールとかだしているさいと。">
    <meta name="twitter:image" content="https://tomisandesita.github.io/shtool/logo.png">
    <style>
        .top {
            text-align: center;
        }
        .card {
            display: inline-block;
            width: 60px;
            height: 90px;
            border: 1px solid black;
            margin: 5px;
            text-align: center;
            line-height: 90px;
            font-size: 20px;
            background-color: white;
            color:black ;
        }
        .card.hidden {
            background-color: gray;
        }
        .game-info {
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <header>
        <div class="header-container">
            <img src="logo.png" alt="Logo" class="logo">
            <div class="nocolorlink"><a href="テンプレ.html" ><h1>Blackjack</h1></a></div>
            <nav>
                <ul>
                    <li><a href="index.html">ホーム</a></li>
                    <li><a href="tools.html" rel="noopener noreferrer">つーるおきば</a></li>
                </ul>
            </nav>
        </div>
    </header>
    <br><br><br><br><br><br>
    <div class="top">
        <h2>ブラックジャック</h2>
        <button id="startButton" onclick="startGame()">スタート</button>
        <div id="gameArea" style="display: none;">
            <h3>プレイヤーの手札</h3>
            <div id="playerCards"></div>
            <p>合計: <span id="playerTotal">0</span></p>
            <button onclick="hit()">ヒット</button>
            <button onclick="stand()">スタンド</button>
            <h3>ディーラーの手札</h3>
            <div id="dealerCards"></div>
            <p>合計: <span id="dealerTotal">0</span></p>
            <div id="result"></div>
            <br><br><br><br><br><br>
        </div>
    </div>
    <footer>
        <p>
            &copy; 2024 TOOLS SHOUMONAI<br>
            <a href="https://www.youtube.com/channel/UCKG8x3kgEXAefSenOpFQj7Q/" rel="noopener noreferrer"><img src="image2.png" alt="Youtubelogo"></a>
            <a href="https://discord.gg/dtnPphHbpT" rel="noopener noreferrer"><img src="image3.png" alt="discordlogo"></a>
        </p>
    </footer>

    <script>
        let deck = [];
        let playerHand = [];
        let dealerHand = [];
        let playerTotal = 0;
        let dealerTotal = 0;

        function createDeck() {
            const suits = ['♥', '♦', '♣', '♠'];
            const values = ['2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A'];
            deck = [];
            for (let suit of suits) {
                for (let value of values) {
                    deck.push({ value, suit });
                }
            }
            deck = deck.sort(() => Math.random() - 0.5);
        }

        function calculateTotal(hand) {
            let total = 0;
            let aces = 0;
            hand.forEach(card => {
                if (card.value === 'A') {
                    total += 11;
                    aces += 1;
                } else if (['K', 'Q', 'J'].includes(card.value)) {
                    total += 10;
                } else {
                    total += parseInt(card.value);
                }
            });
            while (total > 21 && aces) {
                total -= 10;
                aces -= 1;
            }
            return total;
        }

        function startGame() {
            document.getElementById('startButton').style.display = 'none';
            document.getElementById('gameArea').style.display = 'block';
            createDeck();
            playerHand = [deck.pop(), deck.pop()];
            dealerHand = [deck.pop(), deck.pop()];
            updateUI();
        }

        function updateUI() {
            const playerCardsDiv = document.getElementById('playerCards');
            const dealerCardsDiv = document.getElementById('dealerCards');
            playerCardsDiv.innerHTML = '';
            dealerCardsDiv.innerHTML = '';
            playerHand.forEach(card => {
                playerCardsDiv.innerHTML += `<div class="card">${card.value}${card.suit}</div>`;
            });
            dealerHand.forEach((card, index) => {
                if (index === 0) {
                    dealerCardsDiv.innerHTML += `<div class="card">${card.value}${card.suit}</div>`;
                } else {
                    dealerCardsDiv.innerHTML += `<div class="card hidden">?</div>`;
                }
            });
            playerTotal = calculateTotal(playerHand);
            dealerTotal = calculateTotal([dealerHand[0]]);
            document.getElementById('playerTotal').innerText = playerTotal;
            document.getElementById('dealerTotal').innerText = dealerTotal;
        }

        function hit() {
            playerHand.push(deck.pop());
            playerTotal = calculateTotal(playerHand);
            updateUI();
            if (playerTotal > 21) {
                endGame('バースト！あなたの負けです。');
            }
        }

        function stand() {
            while (calculateTotal(dealerHand) < 17) {
                dealerHand.push(deck.pop());
            }
            dealerTotal = calculateTotal(dealerHand);
            updateUI();
            checkWinner();
        }

        function checkWinner() {
            const playerFinalTotal = calculateTotal(playerHand);
            const dealerFinalTotal = calculateTotal(dealerHand);
            if (dealerFinalTotal > 21 || playerFinalTotal > dealerFinalTotal) {
                endGame('あなたの勝ちです！');
            } else if (playerFinalTotal < dealerFinalTotal) {
                endGame('ディーラーの勝ちです。');
            } else {
                endGame('引き分けです。');
            }
        }

        function endGame(message) {
            dealerTotal = calculateTotal(dealerHand);
            document.getElementById('dealerCards').innerHTML = '';
            dealerHand.forEach(card => {
                document.getElementById('dealerCards').innerHTML += `<div class="card">${card.value}${card.suit}</div>`;
            });
            document.getElementById('dealerTotal').innerText = dealerTotal;
            document.getElementById('result').innerText = message;
            setTimeout(() => location.reload(), 5000);
        }
    </script>
</body>
</html>
